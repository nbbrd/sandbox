name: Update dashboard

on: workflow_dispatch

jobs:
  update-dashboard:
    runs-on: ubuntu-latest
    steps:
      - name: Download changelogs
        run: |
          curl -o jdplus-benchmarking.md https://raw.githubusercontent.com/jdemetra/jdplus-benchmarking/develop/CHANGELOG.md
          curl -o jdplus-incubator.md https://raw.githubusercontent.com/jdemetra/jdplus-incubator/develop/CHANGELOG.md
          curl -o jdplus-experimental.md https://raw.githubusercontent.com/jdemetra/jdplus-experimental/develop/CHANGELOG.md
          curl -o jdplus-revisions.md https://raw.githubusercontent.com/jdemetra/jdplus-revisions/develop/CHANGELOG.md
          curl -o jdplus-nowcasting.md https://raw.githubusercontent.com/jdemetra/jdplus-nowcasting/develop/CHANGELOG.md

      - name: Scan changelogs
        uses: jbangdev/jbang-action@v0.115.0
        with:
          script: com.github.nbbrd.heylogs:heylogs-cli:0.8.0:bin
          scriptargs: "scan . -f json -o scan.json"

      - name: Print scan
        run: cat scan.json
